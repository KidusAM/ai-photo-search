version: 0.2

phases:
  install:
    commands:
      - echo "Installing nothing at all"
  build:
    commands:
      - echo "Zipping and deploying lambda files"
      - zip index_photos.zip index-photos.py
      - zip search_images.zip search-images.py
  post_build:
    commands:
      - echo "Pushing lambdas"
      - aws lambda update-function-code --function-name search-images-cloudformation --zip-file fileb://search_images.zip
      - aws lambda update-function-code --function-name index-images-cloudformation --zip-file fileb://index_photos.zip
      - echo "Pushed successfully!!"
